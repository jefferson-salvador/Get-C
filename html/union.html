<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Jefferson Salvador">
    <meta name="description" content="This is a website for tutorial of programming languages for those who wants to learn programming.">
    <meta name="keywords" content="Tutorial, Java, CSS, HTML, Python, VB, C, C++">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Mulish&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="../images/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="../css/style.css">
    <title>Get-C | Unions</title>
</head>
<body>
    <div class="wrapper">
        <div class="container-fluid bg-light p-0">
            <div  id="myHeader">
                <nav class="navbar navbar-expand-md navbar-dark py-0 font-weight-bold">
                    <a href="../index.html" class="navbar-brand py-3 link-effect ">GET-C</a>
                    <button class="navbar-toggler py3" data-toggle="collapse" data-target="#navbarMenu" aria-expanded="false" aria-controls="navbarMenu">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarMenu">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item mx-3 link-effect">
                                <a href="../index.html#what" class="nav-link">Introduction</a>
                            </li>
                            <li class="nav-item mx-3 link-effect">
                                <a href="../index.html#career" class="nav-link">Careers</a>
                            </li>
                            <li class="nav-item mx-3 link-effect">
                                <a href="about.html" class="nav-link">About</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xl-2 col-lg-3 sidebar pl-0 py-lg-5">
                        <nav class="navbar navbar-expand-lg navbar-dark py-0 font-weight-bold pl-0">
                            <div class="collapse navbar-collapse" id="navbarMenu">
                                <ul class="navbar-nav flex-column w-100 panel-group py-3"  id="accordion">
                                    <li class="nav-item mx-3 my-2">
                                        <a href="getting-started.html" class="link-effect text-light">Getting Started</a>
                                    </li>
                                    <li class="nav-item mx-3 my-2">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <div class="panel-title">
                                                    <a class="text-light panel-title link-effect" data-toggle="collapse" href="#basics"> <span>Basics</span>
                                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                                        </svg>
                                                    </a>
                                                </div>
                                            </div>
                                            <ul id="basics" class="list-group panel-collapse collapse in" data-parent="#accordion" >
                                                <div class="panel-body">
                                                    <li class="list-group-item link-effect"> <a href="hello-world.html"> <span>Hello, World</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="variable.html"> <span>Variables</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="array.html"> <span>Arrays</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="condition.html"> <span>Conditions</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="string.html"> <span>Strings</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="for-loop.html"> <span>For loops</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="while-loop.html"> <span>While Loop</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="function.html"> <span>Functions</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="static.html"> <span>Statics</span> </a> </li>
                                                </div>
                                            </ul>
                                        </div>
                                    </li>
                                    <li class="nav-item mx-3 my-2">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <div class="panel-title">
                                                    <a class="text-light panel-title link-effect" data-toggle="collapse" href="#advanced"> <span class="active">Advanced</span>
                                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                                        </svg>
                                                    </a>
                                                </div>
                                            </div>
                                            <ul id="advanced" class="list-group panel-collapse collapse in" data-parent="#accordion" >
                                                <div class="panel-body">
                                                    <li class="list-group-item link-effect"> <a href="multi-array.html"> <span>Multidimentional Array</span> </a></li>
                                                    <li class="list-group-item link-effect"> <a href="pointer.html"> <span>Pointers</span> </a></li>
                                                    <li class="list-group-item link-effect"> <a href="structure.html"> <span>Structures</span> </a></li>
                                                    <li class="list-group-item link-effect"> <a href="argument.html"> <span>Function Argument</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="dynamic.html"> <span>Dynamic Allocation</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="anp.html"> <span>Arrays and Pointers</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="recursion.html"> <span>Recursion</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="linked.html"> <span>Linked Lists</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="binary.html"> <span>Binary Trees</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="union.html"> <span class="active2">Unions</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="p-arithmetic.html"> <span>Pointer Arithmetics</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="func-pointer.html"> <span>Function Pointers</span> </a> </li>
                                                </div>
                                            </ul>
                                        </div>
                                    </li>
                                    <!-- <li class="nav-item mx-3 my-2">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <div class="panel-title">
                                                    <a class="text-light panel-title link-effect" data-toggle="collapse" href="#examples"> <span>Examples</span>
                                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                                        </svg>
                                                    </a>
                                                </div>
                                            </div>
                                            <ul id="examples" class="list-group panel-collapse collapse in" data-parent="#accordion" >
                                                <div class="panel-body">
                                                    <li class="list-group-item link-effect"> <a href="hello.html"> <span>Hello, World!</span> </a></li>
                                                    <li class="list-group-item link-effect"> <a href="print-int.html"> <span>Print Inputted Integer</span> </a></li>
                                                    <li class="list-group-item link-effect"> <a href="add-int.html"> <span>Add Two Integers</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="mult-float.html"> <span>Multiply Floats</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="ascii.html"> <span>Print ASCII</span> </a> </li>
                                                    <li class="list-group-item link-effect"> <a href="swap.html"> <span>Swap Numbers</span> </a> </li>
                                                </div>
                                            </ul>
                                        </div>
                                    </li> -->
                                    
                                </ul>
                            </div>
                        </nav>
                    </div>

                    <div class="col-xl-10 col-lg-9 p-5"  id="contents">
                        <h1><b>Unions</b></h1>
                        <hr>
                        
                        <p class="pt-5">C Unions are essentially the same as C Structures, except that instead of containing multiple variables each with their own memory a Union allows for multiple names to the same variable. These names can treat the memory as different types (and the size of the union will be the size of the largest type, + any padding the compiler might decide to give it)</p>

                        <p>So if you wanted to be able to read a variable's memory in different ways, for example read an integer one byte at a time, you could have something like this:</p>
                        
                        <div class="codeblock">
<code>
    union intParts {
        int theInt;
        char bytes[sizeof(int)];
    };

</code>
                        </div>

                        <br>

                        <p>Allowing you to look at each byte individually without casting a pointer and using pointer arithmetic:</p>
                        
                        <div class="codeblock">
<code>
    union intParts parts;
    parts.theInt = 5968145; <span class="text-muted">// arbitrary number > 255 (1 byte)</span>
    
    printf("The int is %i\nThe bytes are [%i, %i, %i, %i]\n",
    parts.theInt, parts.bytes[0], parts.bytes[1], parts.bytes[2], parts.bytes[3]);
    
    <span class="text-muted">// vs</span>
    
    int theInt = parts.theInt;
    printf("The int is %i\nThe bytes are [%i, %i, %i, %i]\n",
    theInt, *((char*)&theInt+0), *((char*)&theInt+1), *((char*)&theInt+2), *((char*)&theInt+3));
    
    <span class="text-muted">// or with array syntax which can be a tiny bit nicer sometimes</span>
    
    printf("The int is %i\nThe bytes are [%i, %i, %i, %i]\n",
        theInt, ((char*)&theInt)[0], ((char*)&theInt)[1], ((char*)&theInt)[2], ((char*)&theInt)[3]);

</code>
                        </div>

                        <br>

                        <p>Combining this with a structure allows you to create a "tagged" union which can be used to store multiple different types, one at a time.</p>
                        
                        <p>For example, you might have a "number" struct, but you don't want to use something like this:</p>
                        
                        <div class="codeblock">
<code>
    struct operator {
        int intNum;
        float floatNum;
        int type;
        double doubleNum;
    };

</code>
                        </div>

                        <br>

                        <p>Because your program has a lot of them and it takes a bit too much memory for all of the variables, so you could use this:</p>
                        
                        <div class="codeblock">
<code>
    struct operator {
        int type;
        union {
          int intNum;
          float floatNum;
          double doubleNum;
        } types;
    };

</code>
                        </div>

                        <br>

                        <p>Like this the size of the struct is just the size of the int <code>type</code> + the size of the largest type in the union (the double). Not a huge gain, only 8 or 16 bytes, but the concept can be applied to similar structs.</p>

                        <p>use:</p>
                        
                        <div class="codeblock">
<code>
    operator op;
    op.type = 0; <span class="text-muted">// int, probably better as an enum or macro constant</span>
    op.types.intNum = 352;

</code>
                        </div>

                        <br>

                        <p>Also, if you don't give the union a name then it's members are accessed directly from the struct:</p>
                        
                        <div class="codeblock">
<code>
    struct operator {
        int type;
        union {
            int intNum;
            float floatNum;
            double doubleNum;
        }; <span class="text-muted">// no name!</span>
    };

    operator op;
    op.type = 0; <span class="text-muted">// int</span>
    <span class="text-muted">// intNum is part of the union, but since it's not named you access it directly off the struct itself</span>
    op.intNum = 352;

</code>
                        </div>

                        <br>

                        <p>Another, perhaps more useful feature, is when you always have multiple variables of the same type, and you want to be able to use both names (for readability) and indexes (for ease of iteration), in that case you can do something like this:</p>
                        
                        <div class="codeblock">
<code>
    union Coins {
        struct {
            int quarter;
            int dime;
            int nickel;
            int penny;
        }; <span class="text-muted">// anonymous struct acts the same way as an anonymous union, members are on the outer container</span>
        int coins[4];
    };

</code>
                        </div>

                        <br>

                        <p>In that example you can see that there is a struct which contains the four (common) coins in the United States.</p>

                        <p>since the union makes the variables share the same memory the coins array matches with each int in the struct (in order):</p>
                        
                        <div class="codeblock">
<code>
    union Coins change;
    for(int i = 0; i &lt; sizeof(change) / sizeof(int); ++i)
    {
        scanf("%i", change.coins + i); <span class="text-muted">// BAD code! input is always suspect!</span>
    }
    printf("There are %i quarters, %i dimes, %i nickels, and %i pennies\n",
        change.quarter, change.dime, change.nickel, change.penny);

</code>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid text-center text-light p-3 footer mt-5">
            <img src="../images/logo2.png" alt="logo" height="50px">
        </div>
    </div>
   

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
</html>